<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gizli Kelime Servisi</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        .container {
            background: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .status {
            padding: 15px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .success { background-color: #d4edda; color: #155724; }
        .error { background-color: #f8d7da; color: #721c24; }
        .warning { background-color: #fff3cd; color: #856404; }
        pre {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 5px;
            cursor: pointer;
            margin: 5px;
        }
        button:hover { background: #0056b3; }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” Gizli Kelime Servisi</h1>
        
        <div id="status" class="status warning">
            <strong>âš ï¸ PHP Ã‡alÄ±ÅŸmÄ±yor!</strong><br>
            Hosting saÄŸlayÄ±cÄ±nÄ±z PHP'yi desteklemiyor veya doÄŸru yapÄ±landÄ±rÄ±lmamÄ±ÅŸ.
        </div>

        <h2>ğŸ“‹ Mevcut Durum</h2>
        <div id="current-word">
            <strong>Gizli Kelime:</strong> <span id="word">gÃ¼venlik</span><br>
            <strong>Son GÃ¼ncelleme:</strong> <span id="update-time">Manuel</span><br>
            <strong>Sonraki DeÄŸiÅŸim:</strong> <span id="next-change">3 dakika sonra</span>
        </div>

        <h2>ğŸ”§ Ã‡Ã¶zÃ¼m SeÃ§enekleri</h2>
        
        <button onclick="testPHP()">PHP Testi Yap</button>
        <button onclick="useStaticJSON()">Statik JSON Kullan</button>
        <button onclick="useJavaScript()">JavaScript Ã‡Ã¶zÃ¼mÃ¼</button>
        
        <div id="test-results"></div>

        <h2>ğŸ“± Flutter UygulamasÄ± Ä°Ã§in</h2>
        <p>Flutter uygulamanÄ±zda ÅŸu URL'yi kullanÄ±n:</p>
        <pre id="flutter-url">https://yourdomain.com/secret_word.json</pre>
        
        <h2>ğŸ”„ Manuel Kelime DeÄŸiÅŸtirme</h2>
        <id="word-selector">
            <option value="gÃ¼venlik">gÃ¼venlik</option>
            <option value="sistem">sistem</option>
            <option value="kapÄ±">kapÄ±</option>
            <option value="giriÅŸ">giriÅŸ</option>
            <option value="Ã§Ä±kÄ±ÅŸ">Ã§Ä±kÄ±ÅŸ</option>
            <option value="merhaba">merhaba</option>
            <option value="hoÅŸgeldin">hoÅŸgeldin</option>
            <option value="teÅŸekkÃ¼r">teÅŸekkÃ¼r</option>
            <option value="lÃ¼tfen">lÃ¼tfen</option>
            <option value="tamam">tamam</option>
        </select>
        <button onclick="changeWord()">Kelimeyi DeÄŸiÅŸtir</button>

        <h2>ğŸ“Š JSON Ã‡Ä±ktÄ±sÄ±</h2>
        <pre id="json-output"></pre>
    </div>

    <script>
        // TÃ¼rkÃ§e kelime havuzu
        const wordPool = [
            'gÃ¼venlik', 'sistem', 'kapÄ±', 'giriÅŸ', 'Ã§Ä±kÄ±ÅŸ',
            'merhaba', 'hoÅŸgeldin', 'teÅŸekkÃ¼r', 'lÃ¼tfen', 'tamam',
            'baÅŸla', 'bitir', 'devam', 'dur', 'bekle',
            'aÃ§Ä±k', 'kapalÄ±', 'yeÅŸil', 'kÄ±rmÄ±zÄ±', 'mavi'
        ];

        let currentWord = 'gÃ¼venlik';
        let lastUpdateTime = new Date();

        // 3 dakikalÄ±k otomatik kelime deÄŸiÅŸimi
        function getTimeBasedWord() {
            const now = new Date();
            const minutes = Math.floor(now.getTime() / (1000 * 60 * 3)); // 3 dakikalÄ±k bloklar
            const wordIndex = minutes % wordPool.length;
            return wordPool[wordIndex];
        }

        // Kelimeyi gÃ¼ncelle
        function updateWord() {
            currentWord = getTimeBasedWord();
            lastUpdateTime = new Date();
            
            document.getElementById('word').textContent = currentWord;
            document.getElementById('update-time').textContent = lastUpdateTime.toLocaleString('tr-TR');
            
            // Sonraki deÄŸiÅŸim zamanÄ±nÄ± hesapla
            const nextChange = new Date(lastUpdateTime.getTime() + (3 * 60 * 1000));
            const remaining = Math.max(0, Math.floor((nextChange - new Date()) / 1000));
            document.getElementById('next-change').textContent = remaining + ' saniye sonra';
            
            updateJSON();
        }

        // JSON Ã§Ä±ktÄ±sÄ±nÄ± gÃ¼ncelle
        function updateJSON() {
            const response = {
                success: true,
                secret_word: currentWord,
                timestamp: Math.floor(Date.now() / 1000),
                interval_info: {
                    interval_index: Math.floor(Date.now() / (1000 * 60 * 3)),
                    next_change_in_seconds: Math.max(0, Math.floor((lastUpdateTime.getTime() + (3 * 60 * 1000) - Date.now()) / 1000)),
                    next_change_time: new Date(lastUpdateTime.getTime() + (3 * 60 * 1000)).toISOString()
                },
                server_info: {
                    php_version: "JavaScript Alternative",
                    server_time: new Date().toISOString(),
                    timezone: Intl.DateTimeFormat().resolvedOptions().timeZone
                }
            };
            
            document.getElementById('json-output').textContent = JSON.stringify(response, null, 2);
        }

        // PHP testi
        async function testPHP() {
            const results = document.getElementById('test-results');
            results.innerHTML = '<div class="status warning">PHP test ediliyor...</div>';
            
            try {
                const response = await fetch('phpinfo.php');
                const text = await response.text();
                
                if (text.includes('PHP Ã§alÄ±ÅŸÄ±yor')) {
                    results.innerHTML = '<div class="status success"><strong>âœ… PHP Ã‡alÄ±ÅŸÄ±yor!</strong><br>index.php dosyanÄ±zÄ± kullanabilirsiniz.</div>';
                } else {
                    results.innerHTML = '<div class="status error"><strong>âŒ PHP Ã‡alÄ±ÅŸmÄ±yor</strong><br>Alternatif Ã§Ã¶zÃ¼mler kullanÄ±n.</div>';
                }
            } catch (error) {
                results.innerHTML = '<div class="status error"><strong>âŒ PHP Test BaÅŸarÄ±sÄ±z</strong><br>' + error.message + '</div>';
            }
        }

        // Statik JSON kullan
        function useStaticJSON() {
            document.getElementById('flutter-url').textContent = window.location.origin + '/secret_word.json';
            document.getElementById('test-results').innerHTML = '<div class="status success"><strong>âœ… Statik JSON Aktif</strong><br>Flutter uygulamanÄ±zda yukarÄ±daki URL\'yi kullanÄ±n.</div>';
        }

        // JavaScript Ã§Ã¶zÃ¼mÃ¼
        function useJavaScript() {
            document.getElementById('flutter-url').textContent = window.location.origin + '/api.js';
            document.getElementById('test-results').innerHTML = '<div class="status success"><strong>âœ… JavaScript API Aktif</strong><br>Dinamik kelime deÄŸiÅŸimi Ã§alÄ±ÅŸÄ±yor.</div>';
        }

        // Manuel kelime deÄŸiÅŸtirme
        function changeWord() {
            const selector = document.getElementById('word-selector');
            currentWord = selector.value;
            lastUpdateTime = new Date();
            
            document.getElementById('word').textContent = currentWord;
            document.getElementById('update-time').textContent = lastUpdateTime.toLocaleString('tr-TR');
            updateJSON();
        }

        // Sayfa yÃ¼klendiÄŸinde baÅŸlat
        window.onload = function() {
            updateWord();
            
            // Her 30 saniyede bir gÃ¼ncelle
            setInterval(updateWord, 30000);
            
            // Her saniye kalan sÃ¼reyi gÃ¼ncelle
            setInterval(function() {
                const nextChange = new Date(lastUpdateTime.getTime() + (3 * 60 * 1000));
                const remaining = Math.max(0, Math.floor((nextChange - new Date()) / 1000));
                document.getElementById('next-change').textContent = remaining + ' saniye sonra';
            }, 1000);
        };
    </script>
</body>
</html>
